# 🍎 苹果Vision优化版 - 使用指南

## 🎯 最新更新 v3.0

### ✨ 完整编码格式支持
现在完美支持包含尺寸信息的完整编码格式：
- **示例**: `A3422300021Y00R14.5`
- **格式**: 字母数字混合 + 小数点尺寸
- **优先级**: 最高（第1位）

## 🚀 快速启动

### 推荐方式
```bash
./苹果优化版.sh
```

### 交互式方式  
```bash
./一键处理.sh
```

## 📋 工作流程

1. **智能排序** - 按文件名排序（符合拍摄时间）
2. **颜色分组** - 自动检测macOS文件颜色标签
3. **编码识别** - 双路径OCR识别产品编码
4. **智能重命名** - 生成标准格式文件名

## 🎯 编码识别优先级

1. **完整编码含尺寸** - `A3422300021Y00R14.5` ⭐
2. **长字母数字编码** - `A1243100395WDBN42`
3. **复合编码格式** - 结构化混合编码
4. **小数点编码** - `14.5`, `13.2`
5. **其他格式** - 分隔符、纯数字等

## 🎨 颜色标签使用

### 添加颜色标签
1. 在Finder中选中标签图片
2. 右键 → 标记 → 选择颜色
3. 推荐颜色：红、绿、蓝、黄

### 分组逻辑
- 🏷️ **标签图** - 有颜色标记的图片
- 📦 **产品图** - 紧跟标签图的无标记图片

## 📊 技术特性

### 苹果Vision双路径
- **Fast路径** - 快速字符检测
- **Accurate路径** - 精确神经网络识别
- **智能合并** - 综合两种结果

### 评分算法
- 置信度评分: 35%
- 优先级评分: 35% 
- 长度评分: 20%
- 方法加分: 10%
- **格式加分: 15%** (完整编码特殊加分)

## 💡 使用建议

### 拍摄技巧
- 确保编码文字清晰
- 充足光线，避免反光
- 垂直拍摄，减少倾斜
- 适当距离，编码占合适比例

### 文件准备
- 为第一张图片（标签图）添加颜色标记
- 按产品拍摄顺序组织文件
- 处理前建议备份重要文件

## 🎉 重命名结果

### 标准格式
```
A3422300021Y00R14.5-标签.jpg
A3422300021Y00R14.5-1.jpg  
A3422300021Y00R14.5-2.jpg
A3422300021Y00R14.5-3.jpg
```

### 产品分组
```
产品组1-红色/
├── A3422300021Y00R14.5-标签.jpg
├── A3422300021Y00R14.5-1.jpg
└── A3422300021Y00R14.5-2.jpg

产品组2-绿色/
├── A3422300022Y00R15.6-标签.jpg
└── A3422300022Y00R15.6-1.jpg
```

## 🔧 故障排除

### 常见问题
1. **编码识别失败** - 检查图片清晰度和光线
2. **分组不正确** - 确认颜色标签设置
3. **文件权限错误** - 确保文件夹可写权限

### 系统要求
- macOS 10.15+ (推荐 11.0+)
- Swift 5.5+ (随Xcode安装)
- Apple Vision框架 (系统内置)

---

**🎯 专为产品图片批量处理优化 | 🍎 基于苹果官方最佳实践** 